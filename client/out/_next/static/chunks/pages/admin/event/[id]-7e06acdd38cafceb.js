(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{8401:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/event/[id]",function(){return t(8982)}])},8982:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return q}});var n=t(4051),a=t.n(n),l=t(5893),i=t(1163),s=t(9008),o=t(7294),c=t(782),d=t(6807),x=t(6813),u=t(86),m=t(6140),p=t(5259),h=t(2175),f=t(4231),v=t(7456),j=t(7725),y=f.Ry().shape({start_time:f.Z_().trim().required().label("Start Time"),end_time:f.Z_().trim().required().label("End Time"),year:f.Z_().trim().required().label("Year"),capacity:f.Rx().required("Capacity")}),b=function(e){var r=e.setOpen,t=e.handleSubmit,n=e.slot;return(0,l.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0 flex flex-col justify-center items-center",children:(0,l.jsxs)("div",{className:"".concat(v.scroll_element," max-w-5xl bg-primaries-800 w-11/12 mx-auto overflow-y-auto px-4 py-8 rounded-xl shadow-md"),style:{height:"70vh"},children:[(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{className:"mb-5 text-primaries-100",onClick:function(){return r(!1)},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,l.jsx)(h.J9,{initialValues:{start_time:(null===n||void 0===n?void 0:n.start_time)?n.start_time:"",end_time:(null===n||void 0===n?void 0:n.end_time)?n.end_time:"",capacity:(null===n||void 0===n?void 0:n.capacity)?n.capacity:"",year:(null===n||void 0===n?void 0:n.year)?n.year:""},validationSchema:y,onSubmit:t,children:function(e){var r=e.values,t=e.handleChange,n=e.handleBlur,a=e.handleSubmit;return(0,l.jsx)("form",{onSubmit:a,children:(0,l.jsxs)("div",{className:"grid md:grid-cols-1 gap-5",children:[(0,l.jsx)(j.Z,{type:"text",name:"capacity",value:r.capacity,placeholder:"Slot Capacity",label:"Slot Capacity",onChange:t,onBlur:n}),(0,l.jsx)(j.Z,{type:"datetime-local",name:"start_time",value:r.start_time,placeholder:"Slot Start Time",label:"Slot Start Time",onChange:t,onBlur:n}),(0,l.jsx)(j.Z,{type:"datetime-local",name:"end_time",value:r.end_time,placeholder:"Slot End Time",label:"Slot End Time",onChange:t,onBlur:n}),(0,l.jsx)(j.Z,{type:"text",name:"year",value:r.year,placeholder:"Years (FE SE TE)",label:"Year",onChange:t,onBlur:n}),(0,l.jsx)("div",{children:(0,l.jsx)(p.Z,{type:"submit",children:"Save"})})]})})}})]})})},g=t(155),N=t(4590),w=t(6017),S=function(e){var r=e.slot,t=e.handleDelete,n=(0,o.useState)(!1),a=n[0],i=n[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:r.id}),(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:(0,N.ZP)(r.start_time)}),(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:(0,N.ZP)(r.end_time)}),(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:r.capacity}),(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:r.year}),(0,l.jsx)("td",{className:"px-2 py-2 text-center text-lg border-gray-900 border-2",children:(0,l.jsx)("span",{className:"flex gap-2 justify-center",children:(0,l.jsx)("button",{onClick:function(){return i(!0)},children:(0,l.jsx)(g.L_o,{})})})})]}),a&&(0,l.jsx)(w.Z,{handleConfirm:function(){t(r.id),i(!1)},handleCancel:function(){return i(!1)},text:"Are you sure?"})]})};function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function k(e,r,t,n,a,l,i){try{var s=e[l](i),o=s.value}catch(c){return void t(c)}s.done?r(o):Promise.resolve(o).then(n,a)}function Z(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var l=e.apply(r,t);function i(e){k(l,n,a,i,s,"next",e)}function s(e){k(l,n,a,i,s,"throw",e)}i(void 0)}))}}function C(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return _(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var r=e.slots,t=e.setSlots,n=e.event_id,i=(0,o.useState)(!1),s=i[0],d=i[1],u=function(){var e=Z(a().mark((function e(l){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.Fq)(l,n);case 3:if(!(null===(i=e.sent)||void 0===i?void 0:i.error)){e.next=7;break}return c.Am.error(i.error),e.abrupt("return");case 7:t(C(r).concat([i.slot])),d(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),c.Am.error("Something Went Wrong");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=Z(a().mark((function e(n){var l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.NO)(n);case 3:if(!(null===(l=e.sent)||void 0===l?void 0:l.error)){e.next=7;break}return c.Am.error(l.error),e.abrupt("return");case 7:t(r.filter((function(e){return e.id!==n}))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),c.Am.error("Something Went Wrong");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full overflow-x-auto mt-5 bg-primaries-800 text-primaries-100 px-4 py-4",children:[(0,l.jsx)("div",{className:"flex mb-5",children:(0,l.jsx)(p.Z,{onClick:function(){return d(!0)},children:"Add Slot"})}),(0,l.jsxs)("table",{className:"min-w-full border-gray-900 border-2",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"id"}),(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"Start Time"}),(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"End Time"}),(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"Capacity"}),(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"Year"}),(0,l.jsx)("th",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",children:"Actions"})]}),!r||0===(null===r||void 0===r?void 0:r.length)&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"px-2 py-2 text-center text-xl border-gray-900 border-2",colSpan:6,children:"No Available Slots"})}),(null===r||void 0===r?void 0:r.length)>0&&r.map((function(e){return(0,l.jsx)(S,{slot:e,handleDelete:m})}))]})]}),s&&(0,l.jsx)(b,{setOpen:d,handleSubmit:u})]})},E=t(7031),T=t(65),P=t(9534);function O(e,r,t,n,a,l,i){try{var s=e[l](i),o=s.value}catch(c){return void t(c)}s.done?r(o):Promise.resolve(o).then(n,a)}function W(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var l=e.apply(r,t);function i(e){O(l,n,a,i,s,"next",e)}function s(e){O(l,n,a,i,s,"throw",e)}i(void 0)}))}}var q=(0,T.Z)((function(){var e=(0,i.useRouter)(),r=(0,o.useContext)(E.Z),t=r.contEvents,n=r.dispatchEvents,p=(0,o.useState)(!1),h=p[0],f=p[1],v=(0,o.useState)([]),j=v[0],y=v[1],b=e.query.id;b=parseInt(b);var g=null===t||void 0===t?void 0:t.find((function(e){return e.id===b})),N=(0,P.Z)((null===g||void 0===g?void 0:g.description)?g.description:""),w=(0,P.Z)((null===g||void 0===g?void 0:g.rules)?g.rules:""),S=(0,P.Z)((null===g||void 0===g?void 0:g.rounds)?g.rounds:""),_=(0,P.Z)((null===g||void 0===g?void 0:g.teams)?g.teams:""),k=(0,P.Z)((null===g||void 0===g?void 0:g.notes)?g.notes:"");(0,o.useEffect)((function(){var e=function(){var e=W(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.sP)(b);case 3:if(!(null===(r=e.sent)||void 0===r?void 0:r.error)){e.next=7;break}return console.log(r.error),e.abrupt("return");case 7:y(r.slots),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[y,b]);var Z=function(){var e=W(a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.eJ)(b,r,n);case 3:if(!(null===(t=e.sent)||void 0===t?void 0:t.error)){e.next=7;break}return c.Am.error(t.error),e.abrupt("return");case 7:f(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),c.Am.error("Something Went Wrong");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}();return(null===g||void 0===g?void 0:g.id)?(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(s.default,{children:(0,l.jsx)("title",{children:"Pulzion'22 | Admin"})}),(0,l.jsxs)("div",{children:[h&&(0,l.jsx)(m.Z,{event:g,setOpen:f,handleSubmit:Z}),(0,l.jsxs)("div",{className:"flex gap-8",children:[(0,l.jsx)("div",{className:"bg-primaries-800 px-2 py-2 rounded-xl",style:{width:"200px",minHeight:"200px"},children:(0,l.jsx)("img",{src:g.logo,alt:"logo",className:"w-full"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-5xl font-bold",children:g.name}),(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:g.type}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-bold",children:"Tagline:"}),(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:g.tagline})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"border-2 border-primaries-500 text-primaries-100 px-4 py-2 text-center rounded-xl",onClick:function(){return f(!0)},children:(0,l.jsx)("span",{children:"Edit"})})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-5 mt-5",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-2xl font-bold",children:"Description:"}),N.map((function(e){return(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:e},e)}))]}),g.rules&&w.length>0&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-2xl font-bold",children:"Rules:"}),w.map((function(e){return(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:e},e)}))]}),g.rounds&&S.length>0&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-2xl font-bold",children:"Rounds:"}),S.map((function(e){return(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:e},e)}))]}),g.teams&&_.length>0&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-2xl font-bold",children:"Team Distribution:"}),_.map((function(e){return(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:e},e)}))]}),g.notes&&k.length>0&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-primaries-100 text-2xl font-bold",children:"Note:"}),k.map((function(e){return(0,l.jsx)("p",{className:"text-primaries-100 text-xl font-normal",children:e},e)}))]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(A,{slots:j,setSlots:y,event_id:b})})]})]}):(0,l.jsx)(l.Fragment,{})}))}},function(e){e.O(0,[260,678,885,949,141,673,439,642,774,888,179],(function(){return r=8401,e(e.s=r);var r}));var r=e.O();_N_E=r}]);